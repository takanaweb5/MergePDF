<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF結合ツール</title>
  <link rel="stylesheet" href="style.css">
  <!-- PDF.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <!-- PDF-lib CDN -->
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <!-- Sortable.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>

<body>
  <div class="container">
    <header>
      <h1>PDF結合ツール</h1>
      <p>複数のPDFファイルをドラッグ&ドロップして、ページの順序を変更してから結合できます</p>
    </header>

    <div class="drop-zone" id="dropZone">
      <div class="drop-zone-content">
        <svg class="drop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14,2 14,8 20,8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10,9 9,9 8,9"></polyline>
        </svg>
        <h3>PDFファイルをここにドロップ</h3>
        <p>または<span class="file-select">ファイルを選択</span></p>
        <input type="file" id="fileInput" multiple accept=".pdf" style="display: none;">
      </div>
    </div>

    <div class="controls" id="controls" style="display: none;">
      <div class="control-buttons">
        <button id="clearBtn" class="btn btn-secondary">クリア</button>
        <button id="mergeBtn" class="btn btn-primary">保存</button>
      </div>
      <div class="info">
        <span id="pageCount">0ページ</span>
      </div>
    </div>

    <div class="pages-container" id="pagesContainer">
      <div class="pages-grid" id="pagesGrid">
        <!-- サムネイルがここに動的に追加されます -->
      </div>
    </div>

    <div class="loading" id="loading" style="display: none;">
      <div class="spinner"></div>
      <p>処理中...</p>
    </div>
  </div>

  <!-- モーダルプレビュー -->
  <div id="previewModal" class="modal">
    <div class="modal-content">
      <button id="closeModalBtn" class="close-btn">&times;</button>
      <button id="prevPageBtn" class="nav-btn prev-btn" title="前のページ (←)">&lsaquo;</button>
      <img id="previewImage" class="preview-image" alt="PDF Preview">
      <button id="rotatePreviewBtn" class="rotate-preview-btn" title="90°回転">↻</button>
      <button id="nextPageBtn" class="nav-btn next-btn" title="次のページ (→)">&rsaquo;</button>
      <div class="page-counter" id="pageCounter">1 / 1</div>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>